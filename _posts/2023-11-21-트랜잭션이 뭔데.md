---
title: 트랙잭션이 뭔데?
author: heehong
date: 2023-11-21 19:00:00 +0800
categories: [데이터베이스]
tags: [데이터베이스, 트랜잭션]
published: true
---

# 트랙잭션이 뭔데?

개발을 하고, 데이터베이스를 사용하다 보면 자주 들을 수 있는 용어로 트랙잭션이 있다.

>  데이터베이스 관리 시스템 또는 유사한 시스템에서 상호작용의 단위이다. 유사한 시스템이란 트랜잭션이 성공과 실패가 분명하고 상호 독립적이며, 일관되고 믿을 수 있는 시스템을 의미한다.

트랜잭션은 데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위 또는 한꺼번에 모두 수행되어야 할 일련의 연산들을 의미한다.

트랜잭션 하나에 여러개의 트랜잭션이 포함되어 있을 수 있다. 그 중 하나라도 실패하면 실패, 모두 성공해야 성공으로 판단한다.

하나의 트랜잭션의 Commit 되거나 Rollback 된다.

> Commit : 하나의 트랜잭션이 성공적으로 처리하겠다고 확정하는 명령어로 데이터베이스에 영구적으로 반영된다.
>
> Rollback: 작업 중 문제가 발생되어 트랜잭션의 처리과정에서 발생한 변경사항을 취소하는 명령어이다. 트랜잭션이 시작되기 이전의 상태로 되돌린다. 마지막 Commit을 완료한 시점으로 다시 돌아간다.

### 특성 - ACID

#### Atomicity(원자성)

- 트랜잭션의 연산은 데이터베이스에 모두 반영되든지 아니면 전혀 반영되지 않아야 한다.

#### Consistency(일관성)

- 트랜잭션의 적업 처리 결과는 항상 일관성이 있어야 한다.

#### Isolation(격리성)

- 둘 이상의 트랜잭션이 동시에 병렬 실행되고 있을 때, 어떤 트랜잭션도 다른 트랜잭션 연산에 끼어들 수 없다. 

#### Durability(지속성)

- 트랜잭션이 성공적으로 완료되었으면, 결과는 영구적으로 반영되어야 한다.



----

### 트랜잭션의 격리 수준

| 격리 수준       | Dirty Read | Non Repeatable Read | Phantom Read |
| --------------- | ---------- | ------------------- | ------------ |
| Read Uncommited | 발생       | 발생                | 발생         |
| Read Commited   |            | 발생                | 발생         |
| Repeatable Read |            |                     | 발생         |
| Serializable    |            |                     |              |



### 특성

----

 #### Dirty Read

- 다른 트랜잭션에서 아직 커밋되지 않은 데이터를 읽는 것을 의미합니다. 

#### Non Repeatable Read

- 다른 트랜잭션이 커밋한 데이터를 읽을 수 있는 것을 의미합니다.
- 한 트랜잭션 안에서 같은 쿼리를 두 번 이상 실행 했을 때, 결과가 상이한 경우를 의미합니다.
- 트랜잭션 도중 값의 수정이나 삭제가 일어났을 경우 발생합니다.

#### Phantom Read

- 한 트랜잭션 안에서 데이터를 두 번 이상 읽었을 때, 첫번째 결과에 없던 데이터가 두번째 결과에서 나타나는 현상을 의미합니다.
- 트랜잭션 도중 새로운 데이터가 입력되었을 경우 발생합니다.



### 격리 수준

----

#### Read Uncommited(레벨0) - Dirty Read, Non Repeatable Read, Phantom Read

- 데이터베이스의 일관성을 유지하는 것이 불가능함.
- 트랜잭션의 변경 내용이 Commit 이나 Rollback 에 상관없이 다른 트랜잭션에서 조회가 가능하다.

#### Read Commited(레벨1) - Non Repeatable Read, Phantom Read

- 커밋이 이루어진 트랜잭션만 조회가 가능하다.
- 대부분의 SQL 서버가 사용하는 수준이다.

#### Repeatable Read(레벨2) - Phantom Read

- 트랜잭션이 범위 내에서 조회한 데이터 내용이 항상 동일함을 보장한다.
- Mysql 이 사용하는 수준이다.

#### Serializable(레벨3) - 완전 격리

- 한 트랜잭션에서 읽고 쓰는 데이터를 다른 트랜잭션에서는 절대 접근이 불가능하다.
- 가장 단순한 격리 수준, 가장 엄격한 격리 수준이다.
- 동시 처리가 거의 불가능하다.